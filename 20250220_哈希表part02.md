# 哈希表Part02



### [454.四数相加 ii](https://leetcode.cn/problems/4sum-ii/description/)

```c
struct hashTable{
    int key;
    int val;
    UT_hash_handle hh;
};

int fourSumCount(int* nums1, int nums1Size, int* nums2, int nums2Size, int* nums3, int nums3Size, int* nums4, int nums4Size) {
    struct hashTable* hashtable = NULL;
    for(int i = 0;i<nums1Size;i++){
        for(int j = 0;j<nums2Size;j++){
            int ikey = nums1[i]+nums2[j];
            struct hashTable* tmp;
            HASH_FIND_INT(hashtable,&ikey,tmp);
            if(tmp==NULL){
                struct hashTable* tmp = malloc(sizeof(struct hashTable));
                tmp->key=ikey;tmp->val=1;
                HASH_ADD_INT(hashtable,key,tmp);
            }else{
                tmp->val++;
            }
        }
    } 

    int count = 0;

    for(int i = 0;i<nums3Size;i++){
        for(int j = 0;j<nums4Size;j++){
            int ikey = -nums3[i]-nums4[j];
            struct hashTable* tmp;
            HASH_FIND_INT(hashtable,&ikey,tmp);
            if(tmp!=NULL){
                count+=tmp->val;
            }
        }
    }

    return count;
}
```

这道题的解题方式就是把四个数组分成两个部分，两层循环遍历`nums1`和`nums2`的和，加入`HashTable`，`val`代表得到这个`key`值的和的数量，然后双层循环遍历`nums3`和`nums4`的和的相反数，在`HashTable`中查找，找到结果就在计数变量`count`中加上和的数量。



### [383.赎金信](https://leetcode.cn/problems/ransom-note/)

使用hashtable来解决问题，当然有更简单的方式，就是用一个长度为26的数组来模拟，先训练一下使用uthash库

```c
struct hashTable{
    char key;
    int val;
    UT_hash_handle hh;
};

bool canConstruct(char* ransomNote, char* magazine) {
    int r = strlen(ransomNote);
    int m = strlen(magazine);
    if(m<r) return false;
    struct hashTable* htab = NULL;
    for(int i = 0;i<m;i++){
        char ikey = magazine[i];
        struct hashTable* tmp;
        HASH_FIND(hh,htab,&ikey,sizeof(char),tmp);
        if(tmp==NULL){
            struct hashTable* tmp = malloc(sizeof(struct hashTable));
            tmp->key = ikey;tmp->val = 1;
            HASH_ADD(hh,htab,key,sizeof(char),tmp);
        }else{
            tmp->val++;
        }
    }

    for(int j = 0;j<r;j++){
        struct hashTable* tmp;
        int ikey = ransomNote[j];
        HASH_FIND(hh,htab,&ikey,sizeof(char),tmp);
        if(tmp==NULL||tmp->val==0){
            return false;
        }else{
            tmp->val--;
        }
    }

    return true;

}
```

然后再用数组来解决：

